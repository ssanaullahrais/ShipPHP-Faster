<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ShipPHP Web UI - Init & Profiles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .toast-enter {
        animation: toastIn 0.25s ease-out;
      }
      @keyframes toastIn {
        from {
          transform: translateY(10px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              border: "hsl(214.3 31.8% 91.4%)",
              background: "hsl(0 0% 100%)",
              foreground: "hsl(222.2 47.4% 11.2%)",
              muted: "hsl(210 40% 96.1%)",
              mutedForeground: "hsl(215.4 16.3% 46.9%)",
              primary: "hsl(222.2 47.4% 11.2%)",
              primaryForeground: "hsl(210 40% 98%)",
              card: "hsl(0 0% 100%)",
              cardForeground: "hsl(222.2 47.4% 11.2%)",
            },
            borderRadius: {
              xl: "0.75rem",
            },
            boxShadow: {
              soft: "0 10px 35px rgba(15, 23, 42, 0.12)",
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-slate-950 text-slate-100">
    <div class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
      <header class="border-b border-slate-800/80">
        <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-4">
          <div class="flex items-center gap-3">
            <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-500/20 text-indigo-200">
              <span class="text-lg font-semibold">S</span>
            </div>
            <div>
              <p class="text-xs uppercase tracking-[0.25em] text-slate-400">ShipPHP</p>
              <h1 class="text-lg font-semibold text-white">Onboarding</h1>
            </div>
          </div>
          <div class="flex items-center gap-2 text-xs text-slate-400">
            <span class="rounded-full border border-slate-700 px-3 py-1">Step 1 of 3</span>
            <span class="rounded-full bg-indigo-500/20 px-3 py-1 text-indigo-200">Init</span>
          </div>
        </div>
      </header>

      <main class="mx-auto grid max-w-6xl grid-cols-12 gap-6 px-6 py-10">
        <aside class="col-span-12 space-y-4 lg:col-span-3">
          <div class="rounded-xl border border-slate-800 bg-slate-950/60 p-4 shadow-soft">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-500">Setup Flow</p>
            <div class="mt-4 space-y-2 text-sm">
              <div class="flex items-center justify-between rounded-lg bg-slate-900 px-3 py-2 text-white">
                Init Project
                <span class="text-xs text-indigo-200">Now</span>
              </div>
              <div class="rounded-lg px-3 py-2 text-slate-400">Select Profile</div>
              <div class="rounded-lg px-3 py-2 text-slate-400">Verify Connection</div>
            </div>
          </div>
          <div class="rounded-xl border border-slate-800 bg-slate-950/60 p-4 shadow-soft">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-500">Helpful Tips</p>
            <ul class="mt-3 space-y-2 text-xs text-slate-400">
              <li>• Use a staging profile first.</li>
              <li>• Tokens are stored in shipphp.json.</li>
              <li>• You can rotate tokens later.</li>
            </ul>
          </div>
        </aside>

        <section class="col-span-12 space-y-6 lg:col-span-9">
          <div class="rounded-xl border border-slate-800 bg-slate-950/60 p-6 shadow-soft">
            <h2 class="text-2xl font-semibold text-white">Initialize a Project</h2>
            <p class="mt-1 text-sm text-slate-400">Create shipphp.json and connect to your server profile.</p>

            <div class="mt-6 grid gap-4 md:grid-cols-2">
              <div>
                <label class="text-xs uppercase text-slate-400">Project Name</label>
                <input id="project-name" class="mt-2 w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm" placeholder="My Production App" />
              </div>
              <div>
                <label class="text-xs uppercase text-slate-400">Environment</label>
                <select id="project-env" class="mt-2 w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm">
                  <option>Production</option>
                  <option>Staging</option>
                  <option>Development</option>
                </select>
              </div>
              <div>
                <label class="text-xs uppercase text-slate-400">Server URL</label>
                <input id="server-url" class="mt-2 w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm" placeholder="https://example.com/shipphp-server.php" />
              </div>
              <div>
                <label class="text-xs uppercase text-slate-400">Token</label>
                <input id="server-token" class="mt-2 w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm" placeholder="Paste token" />
              </div>
            </div>

            <div class="mt-6 flex items-center justify-between">
              <div class="text-xs text-slate-400">Generate server file &amp; upload on your hosting first.</div>
              <button class="rounded-lg bg-indigo-500 px-4 py-2 text-sm font-medium text-white" onclick="saveProfile()">Continue</button>
            </div>
          </div>

          <div class="rounded-xl border border-slate-800 bg-slate-950/60 p-6 shadow-soft">
            <h3 class="text-lg font-semibold">Profiles</h3>
            <p class="text-sm text-slate-400">Choose an existing profile instead of creating a new one.</p>
            <div id="profile-list" class="mt-4 grid gap-3 md:grid-cols-2"></div>
          </div>
        </section>
      </main>
    </div>
    <div id="toast-container" class="fixed bottom-6 right-6 z-50 space-y-2"></div>

    <script>
      const PROFILE_KEY = 'shipphp_profiles';
      const SELECTED_KEY = 'shipphp_selected_profile';

      function showToast(title, message, type = 'info') {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        const styles = {
          info: 'border-slate-700 bg-slate-900/90 text-slate-200',
          success: 'border-emerald-500/30 bg-emerald-500/10 text-emerald-100',
          error: 'border-rose-500/40 bg-rose-500/10 text-rose-100',
        };
        toast.className = `toast-enter w-80 rounded-xl border px-4 py-3 shadow-soft ${styles[type]}`;
        toast.innerHTML = `
          <p class="text-sm font-semibold">${title}</p>
          <p class="text-xs text-slate-300">${message}</p>
        `;
        container.appendChild(toast);
        setTimeout(() => toast.remove(), 3500);
      }

      function getProfiles() {
        const raw = localStorage.getItem(PROFILE_KEY);
        return raw ? JSON.parse(raw) : [];
      }

      function setProfiles(profiles) {
        localStorage.setItem(PROFILE_KEY, JSON.stringify(profiles));
      }

      function renderProfiles() {
        const list = document.getElementById('profile-list');
        const profiles = getProfiles();
        if (profiles.length === 0) {
          list.innerHTML = '<div class="text-sm text-slate-400">No profiles saved yet.</div>';
          return;
        }
        list.innerHTML = profiles
          .map(
            (profile) => `
              <div class="rounded-lg border border-slate-800 bg-slate-900/60 p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm font-semibold text-white">${profile.name}</p>
                    <p class="text-xs text-slate-400">${profile.url}</p>
                  </div>
                  <button class="rounded-full bg-emerald-500/20 px-3 py-1 text-xs text-emerald-200" onclick="selectProfile('${profile.id}')">Use</button>
                </div>
              </div>
            `
          )
          .join('');
      }

      function saveProfile() {
        const name = document.getElementById('project-name').value.trim();
        const env = document.getElementById('project-env').value;
        const url = document.getElementById('server-url').value.trim();
        const token = document.getElementById('server-token').value.trim();

        if (!name || !url || !token) {
          showToast('Missing fields', 'Please fill in project name, server URL, and token.', 'error');
          return;
        }

        const profiles = getProfiles();
        const profile = { id: crypto.randomUUID(), name, env, url, token };
        profiles.push(profile);
        setProfiles(profiles);
        localStorage.setItem(SELECTED_KEY, profile.id);
        showToast('Initialized', 'Project setup saved.', 'success');
        renderProfiles();
      }

      function selectProfile(id) {
        localStorage.setItem(SELECTED_KEY, id);
        const profile = getProfiles().find((item) => item.id === id);
        if (profile) {
          showToast('Profile selected', `${profile.name} applied.`, 'info');
        }
      }

      renderProfiles();
    </script>
  </body>
</html>
